<div class="blogComments" id="proposalComments">
	<% @proposal_comments.each do |comment| %>
		<%= render :partial => 'proposals/comment', :locals => {:comment => comment} %>
	<% end %>
</div>


<script type="text/javascript">
	var retval = false;
	var clicked;
	function hiding(event,id) {
		if (!retval) {
			clicked = $('#delete'+id);
			console.log(clicked);
			if (confirm('Sei sicuro di voler cancellare questo commento?')) {			
				$('#comment'+id).hide(600,function() {
					retval = true;
					clicked.click();
				});
				event.stopPropagation();
				return false;
			}
			event.stopPropagation();
			return false;
		}
		else {
			retval = false;
			return true;
		}
		
	}
	
	function createAnswerBox() {
		return $("<div>").append("<textarea>").addClass("proposal_comment");
	}
	
	function openAnswer(el) {
		if (!$(el).data('opened')) {
			console.log("not open");
			$(el).data('opened',true);
			$(el).answerPanel = createAnswerBox(); 
			$(el).parent().parent().parent().parent().append($(el).answerPanel);
		}
		else {
			$(el).data('opened',false);
			$(el).answerPanel.hide();
		}
		
	}
	
	$(function() {
		$('.reply_textarea').watermark('Inserisci un commento').elastic();
	})
</script>